// TEC - Automated Mismatch Detection Tool
// Copyright 2023 Carnegie Mellon University.
// NO WARRANTY. THIS CARNEGIE MELLON UNIVERSITY AND SOFTWARE ENGINEERING INSTITUTE MATERIAL IS FURNISHED ON AN "AS-IS" BASIS. CARNEGIE MELLON UNIVERSITY MAKES NO WARRANTIES OF ANY KIND, EITHER EXPRESSED OR IMPLIED, AS TO ANY MATTER INCLUDING, BUT NOT LIMITED TO, WARRANTY OF FITNESS FOR PURPOSE OR MERCHANTABILITY, EXCLUSIVITY, OR RESULTS OBTAINED FROM USE OF THE MATERIAL. CARNEGIE MELLON UNIVERSITY DOES NOT MAKE ANY WARRANTY OF ANY KIND WITH RESPECT TO FREEDOM FROM PATENT, TRADEMARK, OR COPYRIGHT INFRINGEMENT.
// Released under a BSD (SEI)-style license, please see license.txt or contact permission@sei.cmu.edu for full terms.
// [DISTRIBUTION STATEMENT A] This material has been approved for public release and unlimited distribution.  Please see Copyright notice for non-US Government use and distribution.
// This Software was created using the SEI Design System and includes and/or makes use of Third-Party Software subject to its own license.
// DM23-003
 
 
(function(d,g){typeof exports=="object"&&typeof module<"u"?module.exports=g():typeof define=="function"&&define.amd?define(g):(d=typeof globalThis<"u"?globalThis:d||self,d.SdsAutosuggest=g())})(this,function(){"use strict";var d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},g=typeof d=="object"&&d&&d.Object===Object&&d,P=g,F=P,G=typeof self=="object"&&self&&self.Object===Object&&self,R=F||G||Function("return this")(),y=R,U=y,B=U.Symbol,T=B,D=T,k=Object.prototype,L=k.hasOwnProperty,Q=k.toString,C=D?D.toStringTag:void 0;function K(e){var t=L.call(e,C),r=e[C];try{e[C]=void 0;var a=!0}catch{}var n=Q.call(e);return a&&(t?e[C]=r:delete e[C]),n}var W=K,J=Object.prototype,V=J.toString;function X(e){return V.call(e)}var Y=X,I=T,Z=W,ee=Y,te="[object Null]",re="[object Undefined]",j=I?I.toStringTag:void 0;function ae(e){return e==null?e===void 0?re:te:j&&j in Object(e)?Z(e):ee(e)}var ne=ae;function se(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var N=se,ie=ne,oe=N,le="[object AsyncFunction]",he="[object Function]",ue="[object GeneratorFunction]",ce="[object Proxy]";function de(e){if(!oe(e))return!1;var t=ie(e);return t==he||t==ue||t==le||t==ce}var fe=de,pe=y,ve=pe["__core-js_shared__"],_e=ve,S=_e,H=function(){var e=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ge(e){return!!H&&H in e}var Ce=ge,ye=Function.prototype,be=ye.toString;function me(e){if(e!=null){try{return be.call(e)}catch{}try{return e+""}catch{}}return""}var $e=me,we=fe,Se=Ce,xe=N,Oe=$e,Te=/[\\^$.*+?()[\]{}|]/g,De=/^\[object .+?Constructor\]$/,ke=Function.prototype,Ie=Object.prototype,je=ke.toString,Ne=Ie.hasOwnProperty,He=RegExp("^"+je.call(Ne).replace(Te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qe(e){if(!xe(e)||Se(e))return!1;var t=we(e)?He:De;return t.test(Oe(e))}var Ae=qe;function Ee(e,t){return e==null?void 0:e[t]}var Me=Ee,ze=Ae,Pe=Me;function Fe(e,t){var r=Pe(e,t);return ze(r)?r:void 0}var x=Fe,Ge=x,Re=Ge(Object,"create"),b=Re,q=b;function Ue(){this.__data__=q?q(null):{},this.size=0}var Be=Ue;function Le(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Qe=Le,Ke=b,We="__lodash_hash_undefined__",Je=Object.prototype,Ve=Je.hasOwnProperty;function Xe(e){var t=this.__data__;if(Ke){var r=t[e];return r===We?void 0:r}return Ve.call(t,e)?t[e]:void 0}var Ye=Xe,Ze=b,et=Object.prototype,tt=et.hasOwnProperty;function rt(e){var t=this.__data__;return Ze?t[e]!==void 0:tt.call(t,e)}var at=rt,nt=b,st="__lodash_hash_undefined__";function it(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nt&&t===void 0?st:t,this}var ot=it,lt=Be,ht=Qe,ut=Ye,ct=at,dt=ot;function p(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}p.prototype.clear=lt,p.prototype.delete=ht,p.prototype.get=ut,p.prototype.has=ct,p.prototype.set=dt;var ft=p;function pt(){this.__data__=[],this.size=0}var vt=pt;function _t(e,t){return e===t||e!==e&&t!==t}var gt=_t,Ct=gt;function yt(e,t){for(var r=e.length;r--;)if(Ct(e[r][0],t))return r;return-1}var m=yt,bt=m,mt=Array.prototype,$t=mt.splice;function wt(e){var t=this.__data__,r=bt(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():$t.call(t,r,1),--this.size,!0}var St=wt,xt=m;function Ot(e){var t=this.__data__,r=xt(t,e);return r<0?void 0:t[r][1]}var Tt=Ot,Dt=m;function kt(e){return Dt(this.__data__,e)>-1}var It=kt,jt=m;function Nt(e,t){var r=this.__data__,a=jt(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}var Ht=Nt,qt=vt,At=St,Et=Tt,Mt=It,zt=Ht;function v(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}v.prototype.clear=qt,v.prototype.delete=At,v.prototype.get=Et,v.prototype.has=Mt,v.prototype.set=zt;var Pt=v,Ft=x,Gt=y,Rt=Ft(Gt,"Map"),Ut=Rt,A=ft,Bt=Pt,Lt=Ut;function Qt(){this.size=0,this.__data__={hash:new A,map:new(Lt||Bt),string:new A}}var Kt=Qt;function Wt(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Jt=Wt,Vt=Jt;function Xt(e,t){var r=e.__data__;return Vt(t)?r[typeof t=="string"?"string":"hash"]:r.map}var $=Xt,Yt=$;function Zt(e){var t=Yt(this,e).delete(e);return this.size-=t?1:0,t}var er=Zt,tr=$;function rr(e){return tr(this,e).get(e)}var ar=rr,nr=$;function sr(e){return nr(this,e).has(e)}var ir=sr,or=$;function lr(e,t){var r=or(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}var hr=lr,ur=Kt,cr=er,dr=ar,fr=ir,pr=hr;function _(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}_.prototype.clear=ur,_.prototype.delete=cr,_.prototype.get=dr,_.prototype.has=fr,_.prototype.set=pr;var vr=_,_r="__lodash_hash_undefined__";function gr(e){return this.__data__.set(e,_r),this}var Cr=gr;function yr(e){return this.__data__.has(e)}var br=yr,mr=vr,$r=Cr,wr=br;function w(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new mr;++t<r;)this.add(e[t])}w.prototype.add=w.prototype.push=$r,w.prototype.has=wr;var Sr=w;function xr(e,t,r,a){for(var n=e.length,i=r+(a?1:-1);a?i--:++i<n;)if(t(e[i],i,e))return i;return-1}var Or=xr;function Tr(e){return e!==e}var Dr=Tr;function kr(e,t,r){for(var a=r-1,n=e.length;++a<n;)if(e[a]===t)return a;return-1}var Ir=kr,jr=Or,Nr=Dr,Hr=Ir;function qr(e,t,r){return t===t?Hr(e,t,r):jr(e,Nr,r)}var Ar=qr,Er=Ar;function Mr(e,t){var r=e==null?0:e.length;return!!r&&Er(e,t,0)>-1}var zr=Mr;function Pr(e,t,r){for(var a=-1,n=e==null?0:e.length;++a<n;)if(r(t,e[a]))return!0;return!1}var Fr=Pr;function Gr(e,t){return e.has(t)}var Rr=Gr,Ur=x,Br=y,Lr=Ur(Br,"Set"),Qr=Lr;function Kr(){}var Wr=Kr;function Jr(e){var t=-1,r=Array(e.size);return e.forEach(function(a){r[++t]=a}),r}var E=Jr,O=Qr,Vr=Wr,Xr=E,Yr=1/0,Zr=O&&1/Xr(new O([,-0]))[1]==Yr?function(e){return new O(e)}:Vr,ea=Zr,ta=Sr,ra=zr,aa=Fr,na=Rr,sa=ea,ia=E,oa=200;function la(e,t,r){var a=-1,n=ra,i=e.length,f=!0,h=[],s=h;if(r)f=!1,n=aa;else if(i>=oa){var l=t?null:sa(e);if(l)return ia(l);f=!1,n=na,s=new ta}else s=t?[]:h;e:for(;++a<i;){var u=e[a],c=t?t(u):u;if(u=r||u!==0?u:0,f&&c===c){for(var o=s.length;o--;)if(s[o]===c)continue e;t&&s.push(c),h.push(u)}else n(s,c,r)||(s!==h&&s.push(c),h.push(u))}return h}var ha=la,ua=ha;function ca(e){return e&&e.length?ua(e):[]}var da=ca,fa=function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",{staticClass:"relative",attrs:{"data-id":"sds-autosuggest"}},[a("div",{staticClass:"input-group"},[a("div",{staticClass:"relative w-full input-group",class:{"opacity-50 pointer-events-none":t.disabled}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.q,expression:"q",modifiers:{trim:!0}}],ref:"input",staticClass:"pr-8 rounded-r-none form-control",attrs:{type:"text",autocapitalize:"off",autocomplete:"off",spellcheck:"false",autocorrect:"off",placeholder:t.placeholder,disabled:t.disabled,maxlength:t.maxlength},domProps:{value:t.q},on:{input:[function(n){n.target.composing||(t.q=n.target.value.trim())},t.handleChange],keydown:[function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"down",40,n.key,["Down","ArrowDown"])?null:t.handleArrows("down")},function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"up",38,n.key,["Up","ArrowUp"])?null:t.handleArrows("up")},function(n){if(!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")||(n.preventDefault(),n.target!==n.currentTarget))return null}],keyup:[function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")||(n.preventDefault(),n.target!==n.currentTarget)?null:t.handleEnterKeyUp.apply(null,arguments)},function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:t.handleEsc.apply(null,arguments)}],blur:[t.resetDropdown,function(n){return t.$forceUpdate()}]}}),t.q.length>0?a("button",{staticClass:"absolute text-gray-500 right-2 top-3 hover:text-secondary focus:outline-none",attrs:{tabindex:"-1",type:"button",disabled:t.disabled},on:{click:t.handleClearSearchBtn}},[a("span",{staticClass:"sr-only"},[t._v("Clear search")]),a("svg",{staticClass:"w-5 h-5 x",attrs:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"}})])]):t._e()]),a("button",{staticClass:"px-3",class:[t.variantClass],attrs:{disabled:t.disabled||t.disableSearch,type:"button"},on:{click:t.handleSearchBtn}},[a("span",{staticClass:"sr-only"},[t._v("Search")]),a("svg",{staticClass:"w-5 h-5 search",attrs:{viewBox:"0 0 20 20",fill:"currentColor"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"}})])])]),t.isOpen&&!t.preventDisplay?a("ul",{staticClass:"absolute z-50 w-full p-0 mt-1 overflow-auto bg-white border rounded shadow dark:border-gray-600 dark:bg-gray-700"},t._l(t.results,function(n,i){return a("li",{key:i,staticClass:"flex px-4 py-2 text-sm text-left text-gray-900 list-none cursor-pointer dark:text-gray-100 hover:bg-gray-200 dark:hover:bg-gray-600",class:{"active bg-gray-200 dark:bg-gray-600":i===t.arrowCounter},on:{mousedown:function(h){return h.preventDefault(),t.handleDropdownClick(n)}}},[a("div",[a("svg",{staticClass:"inline-block w-5 h-5 my-auto mr-2 search",attrs:{viewBox:"0 0 20 20",fill:"currentColor"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"}})])]),a("div",{staticClass:"flex-grow inline-block my-auto truncate align-middle"},[a("span",{domProps:{innerHTML:t._s(t.resultWithHightlight(n))}})])])}),0):t._e()])},pa=[];function va(e,t,r,a,n,i,f,h){var s=typeof e=="function"?e.options:e;t&&(s.render=t,s.staticRenderFns=r,s._compiled=!0),a&&(s.functional=!0),i&&(s._scopeId="data-v-"+i);var l;if(f?(l=function(o){o=o||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!o&&typeof __VUE_SSR_CONTEXT__<"u"&&(o=__VUE_SSR_CONTEXT__),n&&n.call(this,o),o&&o._registeredComponents&&o._registeredComponents.add(f)},s._ssrRegister=l):n&&(l=h?function(){n.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(s.functional){s._injectStyles=l;var u=s.render;s.render=function(ya,z){return l.call(z),u(ya,z)}}else{var c=s.beforeCreate;s.beforeCreate=c?[].concat(c,l):[l]}return{exports:e,options:s}}const _a={name:"SdsAutosuggest",props:{value:{type:String,default:""},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},maxlength:{type:Number,default:524288},disableSearch:{type:Boolean,default:!1},autosuggest:{type:Function,default:()=>{}},variant:{type:String,default:"default"},items:{type:Array,default:()=>[]},threshold:{type:Number,default:1},autofocus:{type:Boolean,default:!1},useBuiltInHighlighting:{type:Boolean,default:!1}},data(){return{originalQ:"",loading:!1,isOpen:!1,preventDisplay:!0,results:[],arrowCounter:0}},computed:{q:{get(){return this.value},set(e){this.$emit("input",e)}},metThreshold(){return this.q.length>=this.threshold},variantClass(){switch(this.variant){case"primary":return"btn btn-default text-primary dark:text-blue-400";case"danger":return"btn btn-default text-danger dark:text-red-400";default:return"btn btn-default text-secondary dark:text-gray-300"}}},watch:{items(e){this.results=e,this.loading=!1,this.filterResults()}},mounted(){this.autofocus&&this.$refs.input.focus(),document.addEventListener("click",this.handleClickOutside)},destroyed(){document.removeEventListener("click",this.handleClickOutside)},methods:{formatTerm(e){return e.replace(/<\/?b>/gi,"").trim()},filterResults(){const e=JSON.parse(JSON.stringify(this.items));this.results=da(e.filter(t=>{const r=this.q.toLowerCase().replace('"',"").split(" ");let a=!1;return r.forEach(n=>{this.formatTerm(t.term).toLowerCase().indexOf(this.formatTerm(n))>-1&&(a=!0)}),a}).map(t=>(t.term=t.term.trim(),t))),this.isOpen=this.results.length>0&&this.q!=="",this.originalQ===""&&(this.originalQ=(" "+this.q).slice(1))},resultWithHightlight(e){if(!this.useBuiltInHighlighting)return e.term;let t=this.originalQ.replace('"',"").split(" ");t=t.join("|").replace(/[-[\]{}()*+?.,\\^$]/g,"\\$&");const r=new RegExp(t,"gi");return e.term.replace(r,a=>`<b>${a}</b>`)},resetDropdown(){this.originalQ="",this.isOpen=!1,this.preventDisplay=!0,this.results=[],this.arrowCounter=-1},handleChange(){if(!this.metThreshold){this.resetDropdown();return}this.originalQ="",this.arrowCounter=-1,this.preventDisplay=!1,this.loading=!0,this.autosuggest()},handleArrows(e){switch(this.preventDisplay=!1,e){case"down":!this.isOpen&&this.metThreshold&&this.filterResults(),this.arrowCounter<this.results.length-1?this.arrowCounter=this.arrowCounter+1:this.arrowCounter=-1;break;case"up":this.arrowCounter>-1?this.arrowCounter=this.arrowCounter-1:this.arrowCounter=this.results.length-1;break}this.isOpen&&(this.results.length>0&&typeof this.results[this.arrowCounter]<"u"&&(this.q=this.formatTerm(this.results[this.arrowCounter].term)),this.arrowCounter===-1&&(this.q=this.originalQ))},handleEsc(){this.originalQ!==""&&(this.q=(" "+this.originalQ).slice(1)),this.resetDropdown()},handleClickOutside(e){this.$el.contains(e.target)||this.resetDropdown()},handleClearSearchBtn(){this.q="",this.$refs.input.focus()},handleSearchBtn(){this.disabled||this.disableSearch||(this.resetDropdown(),this.$emit("search",this.q))},handleDropdownClick(e){this.disabled||this.disableSearch||(this.q=this.formatTerm(e.term),this.resetDropdown(),e!==null&&this.$emit("result",e),this.$nextTick(()=>{this.$emit("search",this.q)}))},handleEnterKeyUp(){if(this.disabled||this.disableSearch)return;const e=typeof this.results[this.arrowCounter]<"u"?this.results[this.arrowCounter]:null;this.q=e!==null?this.formatTerm(this.results[this.arrowCounter].term):this.originalQ||this.q,this.resetDropdown(),e!==null&&this.$emit("result",e),this.$nextTick(()=>{this.$emit("search",this.q)})}}},M={};var ga=va(_a,fa,pa,!1,Ca,null,null,null);function Ca(e){for(let t in M)this[t]=M[t]}return function(){return ga.exports}()});
